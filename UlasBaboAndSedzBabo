-- ðŸ”¹ QuickScriptMenu (Sekmeli, Dinamik, Bildirimli)
-- F8 ile aÃ§/kapat

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- ðŸ“Œ Ana GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "QuickScriptMenu"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 260, 0, 200)
mainFrame.Position = UDim2.new(0.5, -130, 0.5, -100)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(233, 220, 218)
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.Active = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 8)
mainFrame.Parent = screenGui

local colors = {
	bg = Color3.fromRGB(233, 220, 218),
	btn = Color3.fromRGB(111, 55, 53),
	txt = Color3.fromRGB(233, 220, 218)
}

-- ðŸ“Œ BaÅŸlÄ±k
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -36, 0, 28)
title.Position = UDim2.new(0, 6, 0, 6)
title.BackgroundTransparency = 1
title.Text = "POP CAT HACK"
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextColor3 = colors.btn
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = mainFrame

-- ðŸ“Œ Kapat (-) Butonu
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 24, 0, 24)
closeButton.Position = UDim2.new(1, -28, 0, 6)
closeButton.BackgroundColor3 = colors.btn
closeButton.TextColor3 = colors.txt
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 18
closeButton.Text = "-"
Instance.new("UICorner", closeButton).CornerRadius = UDim.new(0, 6)
closeButton.Parent = mainFrame
closeButton.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
end)

-- ðŸ“Œ Sekme Ã§ubuÄŸu
local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(1, -12, 0, 30)
tabFrame.Position = UDim2.new(0, 6, 0, 36)
tabFrame.BackgroundTransparency = 1
tabFrame.Parent = mainFrame

local tabLayout = Instance.new("UIListLayout")
tabLayout.FillDirection = Enum.FillDirection.Horizontal
tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
tabLayout.Padding = UDim.new(0, 8)
tabLayout.Parent = tabFrame

-- ðŸ“Œ Buton alanÄ±
local buttonsFrame = Instance.new("Frame")
buttonsFrame.Size = UDim2.new(1, -12, 1, -86)
buttonsFrame.Position = UDim2.new(0, 6, 0, 70)
buttonsFrame.BackgroundTransparency = 1
buttonsFrame.Parent = mainFrame

local layout = Instance.new("UIListLayout")
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0, 8)
layout.Parent = buttonsFrame

-- ðŸ“Œ Dinamik boyutlandÄ±rma
local function updateFrameSize()
	-- geniÅŸlik: minimum 260, sekme Ã§ubuÄŸunun iÃ§eriÄŸine gÃ¶re geniÅŸle
	-- yÃ¼kseklik: minimum 120, butonlarÄ±n iÃ§eriÄŸine gÃ¶re uzar
	mainFrame.Size = UDim2.new(0, math.max(260, tabLayout.AbsoluteContentSize.X + 30),
		0, math.max(120, layout.AbsoluteContentSize.Y + 100))
end
layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateFrameSize)
tabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateFrameSize)

-- ðŸ“Œ Durum etiketi
local statusLabel = Instance.new("TextLabel")
statusLabel.AnchorPoint = Vector2.new(0.5, 0)
statusLabel.Position = UDim2.new(0.5, 0, 1, 6)
statusLabel.Size = UDim2.new(1, 0, 0, 20)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = ""
statusLabel.Font = Enum.Font.GothamBold
statusLabel.TextSize = 14
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.Parent = mainFrame

-- ðŸ”¹ Sekmeler (dÃ¼zgÃ¼n formatta entry'ler)
local tabs = {
	["Universal"] = {
		{"CTRL Click TP", "https://obj.wearedevs.net/2/scripts/Click%20Teleport.lua"},
		{"Infinite Yield", "https://raw.githubusercontent.com/DarkNetworks/Infinite-Yield/main/latest.lua"},
		{"Fling", "https://pastebin.com/raw/LgZwZ7ZB"},
		{"FE ChatHax", "https://obj.wearedevs.net/108324/scripts/FE%20ChatHax.lua"},
		{"31 Script", "https://pastebin.com/raw/FWwdST5Y"},
	},
	["TSB"] = {
		{"Phantasm", "https://raw.githubusercontent.com/ATrainz/Phantasm/refs/heads/main/Games/TSB.lua"},
		{"Garou Tech", "https://raw.githubusercontent.com/needanewphone32-eng/tsbfiles/refs/heads/main/Main1.lua"},
	},
	["BABFT"] = {
		{"Oto Build", "https://raw.githubusercontent.com/max2007killer/auto-build-not-limit/main/buildaboatv2obs.txt"},
		{"Oto Build 2 KEYLÄ°","https://raw.githubusercontent.com/catblox1346/StensUIReMake/refs/heads/main/Script/BoatBuilderHub"},
		{"Candy Farm","https://raw.githubusercontent.com/catblox1346/StensUIReMake/refs/heads/main/BabftRelated/FastestCandyFarm"},
		{"Build Ã‡alma KEY: N-314159", "https://raw.githubusercontent.com/novakoolhub/Scripts/main/Scripts/NovBoatR1"},
		{"Image Loader","https://raw.githubusercontent.com/TheRealAsu/BABFT/refs/heads/main/Loader.lua"},
	},
	["Ayarlar"] = {}
}

-- ðŸ”¹ Buton oluÅŸturucu (gelen verinin doÄŸru formatta olduÄŸundan emin olarak)
local function createButton(name, url)
	if type(name) ~= "string" or type(url) ~= "string" then
		warn("createButton: yanlÄ±ÅŸ format (name/url string olmalÄ±)", name, url)
		return
	end

	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, 0, 0, 32)
	btn.BackgroundColor3 = colors.btn
	btn.AutoButtonColor = false
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 16
	btn.Text = name
	btn.TextColor3 = colors.txt
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
	btn.Parent = buttonsFrame

	btn.MouseButton1Click:Connect(function()
		statusLabel.Text = ("[%s] YÃ¼kleniyor..."):format(name)
		local ok, err = pcall(function()
			loadstring(game:HttpGet(url))()
		end)
		statusLabel.Text = ok and ("[%s] BaÅŸarÄ±yla Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±."):format(name) or ("[%s] Hata: %s"):format(name, err)
		task.delay(4, function()
			statusLabel.Text = ""
		end)
	end)
end

-- ðŸ”¹ Sekme deÄŸiÅŸtirici
local activeTab
local function switchTab(tabName)
	-- gÃ¼venlik: tabs tablosunda gerÃ§ekten var mÄ± kontrol et
	if type(tabName) ~= "string" or tabs[tabName] == nil then
		warn("switchTab: geÃ§ersiz tabName:", tabName)
		return
	end

	for _, c in ipairs(buttonsFrame:GetChildren()) do
		if c:IsA("TextButton") or c:IsA("Frame") then c:Destroy() end
	end
	activeTab = tabName

	if tabName == "Ayarlar" then
		-- ðŸ”¸ Unload
		local unloadButton = Instance.new("TextButton")
		unloadButton.Size = UDim2.new(1, 0, 0, 32)
		unloadButton.BackgroundColor3 = colors.btn
		unloadButton.Font = Enum.Font.GothamBold
		unloadButton.TextSize = 16
		unloadButton.Text = "Unload"
		unloadButton.TextColor3 = colors.txt
		Instance.new("UICorner", unloadButton).CornerRadius = UDim.new(0,6)
		unloadButton.Parent = buttonsFrame
		unloadButton.MouseButton1Click:Connect(function()
			screenGui:Destroy()
		end)

		-- ðŸ”¸ Reload
		local reloadButton = Instance.new("TextButton")
		reloadButton.Size = UDim2.new(1, 0, 0, 32)
		reloadButton.BackgroundColor3 = colors.btn
		reloadButton.Font = Enum.Font.GothamBold
		reloadButton.TextSize = 16
		reloadButton.Text = "Reload"
		reloadButton.TextColor3 = colors.txt
		Instance.new("UICorner", reloadButton).CornerRadius = UDim.new(0,6)
		reloadButton.Parent = buttonsFrame
		reloadButton.MouseButton1Click:Connect(function()
			screenGui:Destroy()
			loadstring(game:HttpGet("https://raw.githubusercontent.com/SedzZi/popcatscript/refs/heads/main/UlasBaboAndSedzBabo"))()
		end)
	else
		for _, data in ipairs(tabs[tabName]) do
			-- her data'nin bir isim ve bir URL iÃ§erdiÄŸini garanti et
			if type(data) == "table" and type(data[1]) == "string" and type(data[2]) == "string" then
				createButton(data[1], data[2])
			else
				warn("switchTab: atlandÄ± - hatalÄ± entry:", tabName, data)
			end
		end
	end

	-- updateFrameSize Ã§aÄŸÄ±r (iÃ§erik yenilendikten sonra)
	updateFrameSize()
end

-- ðŸ”¹ Sekme butonlarÄ±
local orderedTabs = {"Universal", "TSB", "BABFT", "Ayarlar"}
for _, tabName in ipairs(orderedTabs) do
	local tabButton = Instance.new("TextButton")
	tabButton.Size = UDim2.new(0, 80, 1, 0)
	tabButton.BackgroundColor3 = colors.btn
	tabButton.TextColor3 = colors.txt
	tabButton.Font = Enum.Font.GothamBold
	tabButton.TextSize = 14
	tabButton.Text = tabName
	Instance.new("UICorner", tabButton).CornerRadius = UDim.new(0, 6)
	tabButton.Parent = tabFrame
	tabButton.MouseButton1Click:Connect(function()
		for _, other in ipairs(tabFrame:GetChildren()) do
			if other:IsA("TextButton") then
				other.BackgroundColor3 = colors.btn
			end
		end
		tabButton.BackgroundColor3 = colors.btn:Lerp(Color3.new(0,0,0), 0.3)
		switchTab(tabName)
	end)
end

-- BurayÄ± "Universal" ile deÄŸiÅŸtirdim (eski "Oyun 1" yoktu)
switchTab("Universal")
tabFrame:FindFirstChildWhichIsA("TextButton").BackgroundColor3 = colors.btn:Lerp(Color3.new(0,0,0), 0.3)

-- ðŸ”¹ F8 toggle
UserInputService.InputBegan:Connect(function(input, gp)
	if gp or UserInputService:GetFocusedTextBox() then return end
	if input.KeyCode == Enum.KeyCode.F8 then
		mainFrame.Visible = not mainFrame.Visible
	end
end)

-- ðŸ”¹ SÃ¼rÃ¼kleme
local dragging, dragStart, startPos
title.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = mainFrame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then dragging = false end
		end)
	end
end)
UserInputService.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStart
		mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

-- ðŸ”¹ Bildirim
local notif = Instance.new("Frame")
notif.Size = UDim2.new(0, 360, 0, 50)
notif.Position = UDim2.new(1, 380, 0.5, 0)
notif.AnchorPoint = Vector2.new(1, 0.5)
notif.BackgroundColor3 = colors.btn
Instance.new("UICorner", notif).CornerRadius = UDim.new(0, 10)
notif.Parent = screenGui

local notifText = Instance.new("TextLabel")
notifText.Size = UDim2.new(1, -20, 1, 0)
notifText.Position = UDim2.new(0, 10, 0, 0)
notifText.BackgroundTransparency = 1
notifText.Font = Enum.Font.GothamBold
notifText.TextSize = 16
notifText.TextColor3 = Color3.fromRGB(255, 255, 255)
notifText.Text = "MenÃ¼yÃ¼ aÃ§/kapat: F8"
notifText.Parent = notif

TweenService:Create(notif, TweenInfo.new(0.6, Enum.EasingStyle.Quint), {Position = UDim2.new(1, -20, 0.5, 0)}):Play()
task.wait(4)
TweenService:Create(notif, TweenInfo.new(0.6, Enum.EasingStyle.Quint), {Position = UDim2.new(1, 380, 0.5, 0)}):Play()
task.wait(0.7)
notif:Destroy()
